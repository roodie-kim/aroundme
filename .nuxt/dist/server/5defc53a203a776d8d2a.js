exports.ids=[7],exports.modules={107:function(t,e,n){"use strict";n.r(e);var o=n(77),r=n.n(o);for(var d in o)"default"!==d&&function(t){n.d(e,t,(function(){return o[t]}))}(d);e.default=r.a},108:function(t,e,n){(e=n(2)(!1)).push([t.i,".button-outer[data-v-7af434a0]{padding:20px 0 0;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end}.button-submit[data-v-7af434a0]{min-width:120px}.title-input[data-v-7af434a0]{padding:12px 15px;margin-bottom:20px}.quill-editor[data-v-7af434a0]{margin-bottom:10px}",""]),t.exports=e},109:function(t,e,n){"use strict";n.r(e);var o=n(78),r=n.n(o);for(var d in o)"default"!==d&&function(t){n.d(e,t,(function(){return o[t]}))}(d);e.default=r.a},110:function(t,e,n){(e=n(2)(!1)).push([t.i,".button-outer[data-v-182865fa]{padding:20px 0 0;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end}.button-submit[data-v-182865fa]{min-width:120px}.title-input[data-v-182865fa]{padding:12px 15px;margin-bottom:20px}.quill-editor[data-v-182865fa]{margin-bottom:10px}",""]),t.exports=e},124:function(t,e,n){"use strict";n.r(e);var o={data:()=>({quill:null,editedPost:{id:null,title:"",body:"",tags:null},tags:""}),computed:{post(){return this.$store.state.posts.post},parsedTags(){if(0===this.tags.length)return[];const t=this.tags.trim().split(/[\s,]+/);return t.length>=10?t.slice(0,10):t}},methods:{updateBody(){this.editedPost.body=JSON.stringify(this.quill.getContents())},changeTagsIntoString(){let t="";this.post.tags.forEach((e,n)=>{0===n?t+=e.name:t=t+", "+e.name}),this.tags=t},async submit(){const t=this.validateBeforeSubmit();if(t.status){this.editedPost.tags=this.parsedTags;const t=await this.$store.dispatch("posts/editPost",this.editedPost);t.status?(this.$buefy.toast.open("등록되었습니다."),this.$router.push(`/posts/${t.data.id}`)):this.$buefy.toast.open("등록이 실패하였습니다. 나중에 다시 시도해주세요.")}else this.$buefy.toast.open(t.message)},validateBeforeSubmit(){const t={status:!1};return this.editedPost.title&&""!==this.editedPost.title.trim()?0!==this.quill.getText().trim().length||this.quill.container.firstChild.innerHTML.includes("img")||this.quill.container.firstChild.innerHTML.includes("video")?(t.status=!0,t):(t.message="내용을 작성해주세요.",t):(t.message="글 제목을 입력해주세요.",t)}},mounted(){const t={modules:{toolbar:{container:[[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{align:"center"},{align:"right"},{align:"justify"}],["link","image"]],handlers:{image:this.imageHandler}}},theme:"snow"},e=n(63),o=this.$refs.quillEditor;this.quill=new e(o,t),this.quill.on("text-change",this.updateBody),this.editedPost.id=this.post.id,this.editedPost.title=this.post.title,this.editedPost.tags=this.post.tags,this.quill.setContents(JSON.parse(this.post.body)),this.changeTagsIntoString()}},r=n(1);var d=Object(r.a)(o,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"container"},[this._ssrNode('<h4 class="title is-size-4" data-v-7af434a0>수정하기</h4> <input placeholder="제목"'+this._ssrAttr("value",this.editedPost.title)+' class="input title-input" data-v-7af434a0> <div class="quill-editor" data-v-7af434a0></div> <div class="button-outer" data-v-7af434a0><button class="button is-primary button-submit" data-v-7af434a0><strong data-v-7af434a0>수정하기</strong></button></div>')])}),[],!1,(function(t){var e=n(107);e.__inject__&&e.__inject__(t)}),"7af434a0","173dd498").exports,l={extends:d};var c=Object(r.a)(l,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"container",staticStyle:{padding:"0 10px"}},[t._ssrNode('<h4 class="title is-size-4" data-v-182865fa>수정하기</h4> <input placeholder="제목"'+t._ssrAttr("value",t.editedPost.title)+' class="input title-input" data-v-182865fa> <div class="quill-editor" data-v-182865fa></div> <p class="has-text-grey-light" style="font-size: 14px;" data-v-182865fa>태그는 스페이스 혹 콤마로 구분되며 최대 10개까지 사용할 수 있습니다.</p> <input placeholder="제목"'+t._ssrAttr("value",t.tags)+' class="input title-input" style="margin-bottom: 5px;" data-v-182865fa> <div class="flex" style="flex-wrap: wrap;" data-v-182865fa>'+t._ssrList(t.parsedTags,(function(e,n){return'<span class="has-text-warm-red" style="font-size: 14px; margin-right: 10px;" data-v-182865fa>'+t._ssrEscape("\n            #"+t._s(e)+"\n        ")+"</span>"}))+'</div> <div class="button-outer" data-v-182865fa><button class="button is-primary button-submit" data-v-182865fa><strong data-v-182865fa>수정하기</strong></button></div>')])}),[],!1,(function(t){var e=n(109);e.__inject__&&e.__inject__(t)}),"182865fa","c34cce82").exports,f={middleware:"authorized",name:"PostEdit",async asyncData({store:t,params:e,query:n,error:o}){const r=e.post;await t.dispatch("posts/fetchPost",{post_id:r})},computed:{isMobile(){return this.$device.isMobile?c:d}}};var h=Object(r.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e(this.isMobile,{tag:"component"})],1)}),[],!1,(function(t){}),"0b69999a","48d26c4c");e.default=h.exports},77:function(t,e,n){var content=n(108);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var o=n(3).default;t.exports.__inject__=function(t){o("6f6d981e",content,!0,t)}},78:function(t,e,n){var content=n(110);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var o=n(3).default;t.exports.__inject__=function(t){o("25ae6a52",content,!0,t)}}};