exports.ids=[7],exports.modules={105:function(t,e,o){"use strict";o.r(e);var d=o(76),n=o.n(d);for(var r in d)"default"!==r&&function(t){o.d(e,t,(function(){return d[t]}))}(r);e.default=n.a},106:function(t,e,o){(e=o(2)(!1)).push([t.i,".category-select[data-v-24624a26]{width:200px}.category-select[data-v-24624a26],.title-input[data-v-24624a26]{margin-bottom:20px}.button-outer[data-v-24624a26]{padding:20px 0 0;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end}.button-submit[data-v-24624a26]{min-width:120px}.title-input[data-v-24624a26]{padding:12px 15px;margin-bottom:20px}.quill-editor[data-v-24624a26]{margin-bottom:10px}",""]),t.exports=e},107:function(t,e,o){"use strict";o.r(e);var d=o(77),n=o.n(d);for(var r in d)"default"!==r&&function(t){o.d(e,t,(function(){return d[t]}))}(r);e.default=n.a},108:function(t,e,o){(e=o(2)(!1)).push([t.i,".category-select[data-v-0718b518]{width:200px}.category-select[data-v-0718b518],.title-input[data-v-0718b518]{margin-bottom:20px}.button-outer[data-v-0718b518]{padding:20px 0 0;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end}.button-submit[data-v-0718b518]{min-width:120px}.title-input[data-v-0718b518]{padding:12px 15px;margin-bottom:20px}.quill-editor[data-v-0718b518]{margin-bottom:10px}",""]),t.exports=e},125:function(t,e,o){"use strict";o.r(e);var d={data:()=>({quill:null,editedPost:{id:null,title:"",board_type:"",body:"",tags:null,area:null,sub_type:null}}),computed:{boards(){return[...this.$store.state.boards.boards]},post(){return this.$store.state.posts.post},areas(){return this.$store.state.posts.areas},subTypes(){return this.$store.state.posts.subTypes}},watch:{editedPost:{deep:!0,handler(t){"B102"!==t.board_type&&(this.editedPost.area=null,this.editedPost.sub_type=null)}}},methods:{updateBody(){this.editedPost.body=JSON.stringify(this.quill.getContents())},async submit(){const t=this.validateBeforeSubmit();if(t.status){this.editedPost.tags=this.parsedTags;const t=await this.$store.dispatch("posts/editPost",this.editedPost);t.status?(this.$buefy.toast.open("등록되었습니다."),this.$router.push(`/posts/${t.data.id}`)):this.$buefy.toast.open("등록이 실패하였습니다. 나중에 다시 시도해주세요.")}else this.$buefy.toast.open(t.message)},validateBeforeSubmit(){const t={status:!1};return this.editedPost.title&&""!==this.editedPost.title.trim()?0!==this.quill.getText().trim().length||this.quill.container.firstChild.innerHTML.includes("img")||this.quill.container.firstChild.innerHTML.includes("video")?(t.status=!0,t):(t.message="내용을 작성해주세요.",t):(t.message="글 제목을 입력해주세요.",t)}},mounted(){const t={modules:{toolbar:{container:[[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{align:"center"},{align:"right"},{align:"justify"}],["link","image"]],handlers:{image:this.imageHandler}}},theme:"snow"},e=o(62),d=this.$refs.quillEditor;this.quill=new e(d,t),this.quill.on("text-change",this.updateBody);const n=JSON.parse(JSON.stringify(this.post));this.editedPost.id=n.id,this.editedPost.board_type=n.board_type,this.editedPost.title=n.title,this.editedPost.area=n.area,this.editedPost.sub_type=n.sub_type,this.quill.setContents(JSON.parse(this.post.body))}},n=o(1);var r=Object(n.a)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[t._ssrNode('<h4 class="title is-size-4" data-v-24624a26>수정하기</h4> '),o("b-select",{staticClass:"category-select",attrs:{placeholder:"카테고리를 선택하세요",expanded:""},model:{value:t.editedPost.board_type,callback:function(e){t.$set(t.editedPost,"board_type",e)},expression:"editedPost.board_type"}},t._l(t.boards,(function(e){return o("option",{key:e.name,domProps:{value:e.cd}},[t._v("\n            "+t._s(e.name)+"\n        ")])})),0),t._ssrNode(" "),"B102"===t.editedPost.board_type?t._ssrNode('<div class="flex" data-v-24624a26>',"</div>",[o("b-select",{staticClass:"category-select",staticStyle:{"margin-right":"20px"},attrs:{placeholder:"지역을 선택하세요",expanded:""},model:{value:t.editedPost.area,callback:function(e){t.$set(t.editedPost,"area",e)},expression:"editedPost.area"}},t._l(t.areas,(function(area){return o("option",{key:area.name,domProps:{value:area.cd}},[t._v("\n                "+t._s(area.name)+"\n            ")])})),0),t._ssrNode(" "),o("b-select",{staticClass:"category-select",attrs:{placeholder:"구매/판매",expanded:""},model:{value:t.editedPost.sub_type,callback:function(e){t.$set(t.editedPost,"sub_type",e)},expression:"editedPost.sub_type"}},t._l(t.subTypes,(function(e){return o("option",{key:e.name,domProps:{value:e.cd}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0)],2):t._e(),t._ssrNode(' <input placeholder="제목"'+t._ssrAttr("value",t.editedPost.title)+' class="input title-input" data-v-24624a26> <div class="quill-editor" data-v-24624a26></div> <div class="button-outer" data-v-24624a26><button class="button is-primary button-submit" data-v-24624a26><strong data-v-24624a26>수정하기</strong></button></div>')],2)}),[],!1,(function(t){var e=o(105);e.__inject__&&e.__inject__(t)}),"24624a26","173dd498").exports,l={extends:r};var c=Object(n.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container",staticStyle:{padding:"0 10px"}},[t._ssrNode('<h4 class="title is-size-4" data-v-0718b518>수정하기</h4> '),o("b-select",{staticClass:"category-select",attrs:{placeholder:"카테고리를 선택하세요",expanded:""},model:{value:t.editedPost.board_type,callback:function(e){t.$set(t.editedPost,"board_type",e)},expression:"editedPost.board_type"}},t._l(t.boards,(function(e){return o("option",{key:e.name,domProps:{value:e.cd}},[t._v("\n            "+t._s(e.name)+"\n        ")])})),0),t._ssrNode(" "),"B102"===t.editedPost.board_type?t._ssrNode('<div class="flex" data-v-0718b518>',"</div>",[o("b-select",{staticClass:"category-select",staticStyle:{"margin-right":"20px"},attrs:{placeholder:"지역을 선택하세요",expanded:""},model:{value:t.editedPost.area,callback:function(e){t.$set(t.editedPost,"area",e)},expression:"editedPost.area"}},t._l(t.areas,(function(area){return o("option",{key:area.name,domProps:{value:area.cd}},[t._v("\n                "+t._s(area.name)+"\n            ")])})),0),t._ssrNode(" "),o("b-select",{staticClass:"category-select",attrs:{placeholder:"구매/판매",expanded:""},model:{value:t.editedPost.sub_type,callback:function(e){t.$set(t.editedPost,"sub_type",e)},expression:"editedPost.sub_type"}},t._l(t.subTypes,(function(e){return o("option",{key:e.name,domProps:{value:e.cd}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0)],2):t._e(),t._ssrNode(' <input placeholder="제목"'+t._ssrAttr("value",t.editedPost.title)+' class="input title-input" data-v-0718b518> <div class="quill-editor" data-v-0718b518></div> <div class="button-outer" data-v-0718b518><button class="button is-primary button-submit" data-v-0718b518><strong data-v-0718b518>수정하기</strong></button></div>')],2)}),[],!1,(function(t){var e=o(107);e.__inject__&&e.__inject__(t)}),"0718b518","c34cce82").exports,_={middleware:"authorized",name:"PostEdit",async asyncData({store:t,params:e,query:o,error:d}){const n=e.post;await t.dispatch("posts/fetchPost",{post_id:n})},computed:{isMobile(){return this.$device.isMobile?c:r}}};var v=Object(n.a)(_,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e(this.isMobile,{tag:"component"})],1)}),[],!1,(function(t){}),"0b69999a","48d26c4c");e.default=v.exports},76:function(t,e,o){var content=o(106);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var d=o(3).default;t.exports.__inject__=function(t){d("33c684a5",content,!0,t)}},77:function(t,e,o){var content=o(108);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var d=o(3).default;t.exports.__inject__=function(t){d("55459358",content,!0,t)}}};