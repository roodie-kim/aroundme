(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{241:function(t,e,o){var content=o(275);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(16).default)("33c684a5",content,!0,{sourceMap:!1})},242:function(t,e,o){var content=o(277);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(16).default)("55459358",content,!0,{sourceMap:!1})},274:function(t,e,o){"use strict";var n=o(241);o.n(n).a},275:function(t,e,o){(e=o(15)(!1)).push([t.i,".category-select[data-v-24624a26]{width:200px}.category-select[data-v-24624a26],.title-input[data-v-24624a26]{margin-bottom:20px}.button-outer[data-v-24624a26]{padding:20px 0 0;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end}.button-submit[data-v-24624a26]{min-width:120px}.title-input[data-v-24624a26]{padding:12px 15px;margin-bottom:20px}.quill-editor[data-v-24624a26]{margin-bottom:10px}",""]),t.exports=e},276:function(t,e,o){"use strict";var n=o(242);o.n(n).a},277:function(t,e,o){(e=o(15)(!1)).push([t.i,".category-select[data-v-0718b518]{width:200px}.category-select[data-v-0718b518],.title-input[data-v-0718b518]{margin-bottom:20px}.button-outer[data-v-0718b518]{padding:20px 0 0;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end}.button-submit[data-v-0718b518]{min-width:120px}.title-input[data-v-0718b518]{padding:12px 15px;margin-bottom:20px}.quill-editor[data-v-0718b518]{margin-bottom:10px}",""]),t.exports=e},294:function(t,e,o){"use strict";o.r(e);o(12);var n,r,d=o(2),l=(o(77),o(93),o(29)),c={data:function(){return{quill:null,editedPost:{id:null,title:"",board_type:"",body:"",tags:null,area:null,sub_type:null}}},computed:{boards:function(){var t=Object(l.a)(this.$store.state.boards.boards);return t},post:function(){return this.$store.state.posts.post},areas:function(){return this.$store.state.posts.areas},subTypes:function(){return this.$store.state.posts.subTypes}},watch:{editedPost:{deep:!0,handler:function(t){"B102"!==t.board_type&&(this.editedPost.area=null,this.editedPost.sub_type=null)}}},methods:{updateBody:function(){this.editedPost.body=JSON.stringify(this.quill.getContents())},submit:(n=Object(d.a)(regeneratorRuntime.mark((function t(){var e,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this.validateBeforeSubmit()).status){t.next=5;break}this.$buefy.toast.open(e.message),t.next=10;break;case 5:return this.editedPost.tags=this.parsedTags,t.next=8,this.$store.dispatch("posts/editPost",this.editedPost);case 8:(o=t.sent).status?(this.$buefy.toast.open("등록되었습니다."),this.$router.push("/posts/".concat(o.data.id))):this.$buefy.toast.open("등록이 실패하였습니다. 나중에 다시 시도해주세요.");case 10:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)}),validateBeforeSubmit:function(){var t={status:!1};return this.editedPost.title&&""!==this.editedPost.title.trim()?0!==this.quill.getText().trim().length||this.quill.container.firstChild.innerHTML.includes("img")||this.quill.container.firstChild.innerHTML.includes("video")?(t.status=!0,t):(t.message="내용을 작성해주세요.",t):(t.message="글 제목을 입력해주세요.",t)}},mounted:function(){var t={modules:{toolbar:{container:[[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{align:"center"},{align:"right"},{align:"justify"}],["link","image"]],handlers:{image:this.imageHandler}}},theme:"snow"},e=o(235),n=this.$refs.quillEditor;this.quill=new e(n,t),this.quill.on("text-change",this.updateBody);var r=JSON.parse(JSON.stringify(this.post));this.editedPost.id=r.id,this.editedPost.board_type=r.board_type,this.editedPost.title=r.title,this.editedPost.area=r.area,this.editedPost.sub_type=r.sub_type,this.quill.setContents(JSON.parse(this.post.body))}},m=(o(274),o(4)),v=Object(m.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("h4",{staticClass:"title is-size-4"},[t._v("수정하기")]),t._v(" "),o("b-select",{staticClass:"category-select",attrs:{placeholder:"카테고리를 선택하세요",expanded:""},model:{value:t.editedPost.board_type,callback:function(e){t.$set(t.editedPost,"board_type",e)},expression:"editedPost.board_type"}},t._l(t.boards,(function(e){return o("option",{key:e.name,domProps:{value:e.cd}},[t._v("\n            "+t._s(e.name)+"\n        ")])})),0),t._v(" "),"B102"===t.editedPost.board_type?o("div",{staticClass:"flex"},[o("b-select",{staticClass:"category-select",staticStyle:{"margin-right":"20px"},attrs:{placeholder:"지역을 선택하세요",expanded:""},model:{value:t.editedPost.area,callback:function(e){t.$set(t.editedPost,"area",e)},expression:"editedPost.area"}},t._l(t.areas,(function(area){return o("option",{key:area.name,domProps:{value:area.cd}},[t._v("\n                "+t._s(area.name)+"\n            ")])})),0),t._v(" "),o("b-select",{staticClass:"category-select",attrs:{placeholder:"구매/판매",expanded:""},model:{value:t.editedPost.sub_type,callback:function(e){t.$set(t.editedPost,"sub_type",e)},expression:"editedPost.sub_type"}},t._l(t.subTypes,(function(e){return o("option",{key:e.name,domProps:{value:e.cd}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0)],1):t._e(),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.editedPost.title,expression:"editedPost.title"}],staticClass:"input title-input",attrs:{placeholder:"제목"},domProps:{value:t.editedPost.title},on:{input:function(e){e.target.composing||t.$set(t.editedPost,"title",e.target.value)}}}),t._v(" "),o("div",{ref:"quillEditor",staticClass:"quill-editor",on:{click:t.focusOnQuill}}),t._v(" "),o("div",{staticClass:"button-outer"},[o("button",{staticClass:"button is-primary button-submit",on:{click:t.submit}},[o("strong",[t._v("수정하기")])])])],1)}),[],!1,null,"24624a26",null).exports,h={extends:v},f=(o(276),Object(m.a)(h,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container",staticStyle:{padding:"0 10px"}},[o("h4",{staticClass:"title is-size-4"},[t._v("수정하기")]),t._v(" "),o("b-select",{staticClass:"category-select",attrs:{placeholder:"카테고리를 선택하세요",expanded:""},model:{value:t.editedPost.board_type,callback:function(e){t.$set(t.editedPost,"board_type",e)},expression:"editedPost.board_type"}},t._l(t.boards,(function(e){return o("option",{key:e.name,domProps:{value:e.cd}},[t._v("\n            "+t._s(e.name)+"\n        ")])})),0),t._v(" "),"B102"===t.editedPost.board_type?o("div",{staticClass:"flex"},[o("b-select",{staticClass:"category-select",staticStyle:{"margin-right":"20px"},attrs:{placeholder:"지역을 선택하세요",expanded:""},model:{value:t.editedPost.area,callback:function(e){t.$set(t.editedPost,"area",e)},expression:"editedPost.area"}},t._l(t.areas,(function(area){return o("option",{key:area.name,domProps:{value:area.cd}},[t._v("\n                "+t._s(area.name)+"\n            ")])})),0),t._v(" "),o("b-select",{staticClass:"category-select",attrs:{placeholder:"구매/판매",expanded:""},model:{value:t.editedPost.sub_type,callback:function(e){t.$set(t.editedPost,"sub_type",e)},expression:"editedPost.sub_type"}},t._l(t.subTypes,(function(e){return o("option",{key:e.name,domProps:{value:e.cd}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0)],1):t._e(),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.editedPost.title,expression:"editedPost.title"}],staticClass:"input title-input",attrs:{placeholder:"제목"},domProps:{value:t.editedPost.title},on:{input:function(e){e.target.composing||t.$set(t.editedPost,"title",e.target.value)}}}),t._v(" "),o("div",{ref:"quillEditor",staticClass:"quill-editor",on:{click:t.focusOnQuill}}),t._v(" "),o("div",{staticClass:"button-outer"},[o("button",{staticClass:"button is-primary button-submit",on:{click:t.submit}},[o("strong",[t._v("수정하기")])])])],1)}),[],!1,null,"0718b518",null).exports),y={middleware:"authorized",name:"PostEdit",asyncData:(r=Object(d.a)(regeneratorRuntime.mark((function t(e){var o,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.store,n=e.params,e.query,e.error,r=n.post,t.next=4,o.dispatch("posts/fetchPost",{post_id:r});case 4:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)}),computed:{isMobile:function(){return this.$device.isMobile?f:v}}},_=Object(m.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e(this.isMobile,{tag:"component"})],1)}),[],!1,null,"0b69999a",null);e.default=_.exports}}]);